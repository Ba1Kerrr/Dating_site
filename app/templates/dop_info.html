<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{{ url_for('static', path='./static/dop-info.css') }}" rel="stylesheet">
</head>
<body>
    <div class = "container">
        <h1>Hello,{{user}}</h1>
        <div class="content">
                <form method="post" id="form" action="/register/dop-info" enctype="multipart/form-data">
                    <div class="user-details">
                                <div class="input-box">
                            <span class="details">Age</span>
                            <input type="text" name="age" placeholder="Enter your Age">
                        </div>
                        <div class="input-box">
                            <span class="details">Gender</span>
                            <select id="gender" name="gender" >
                                <option value="male">Male</option>
                                <option value="female">Femail</option>
                            </select>
                        </div>

                        <div class="input-box">
                            <span class="details">Name</span>
                            <input type="text" name="name" placeholder="Enter your Name" >
                        </div>
                        <div class="input-box">
                            <span class="details">Location</span>
                            <input type="text" id="city" name="location" placeholder="Enter your location">
                            <script>
                            $(document).ready(function() {
                            var cities = ["Нью-Йорк", "Лондон", "Париж",'Москва', 'Санкт-Петербург', 'Новосибирск', 'Екатеринбург', 'Нижний Новгород', 'Казань', 'Челябинск', 'Омск', 'Самара', 'Ростов-на-Дону', 'Уфа', 'Красноярск', 'Пермь', 'Воронеж', 'Саратов', 'Тольятти', 'Краснодар', 'Ижевск', 'Ульяновск', 'Барнаул', 'Ярославль', 'Владивосток', 'Иркутск', 'Хабаровск', 'Тюмень', 'Махачкала', 'Набережные Челны', 'Пенза', 'Рязань', 'Липецк', 'Тула', 'Киров', 'Чебоксары', 'Калуга', 'Брянск', 'Иваново', 'Курск', 'Белгород', 'Владимир', 'Сочи', 'Тверь', 'Кемерово', 'Томск', 'Астрахань', 'Псков', 'Орёл', 'Рыбинск', 'Сызрань', 'Златоуст', 'Энгельс', 'Вологда', 'Кострома', 'Таганрог', 'Новороссийск', 'Севастополь', 'Балаково', 'Мытищи', 'Лысьва', 'Курган', 'Стерлитамак', 'Грозный', 'Нальчик', 'Майкоп', 'Пятигорск', 'Ессентуки', 'Минеральные Воды', 'Кисловодск', 'Ставрополь', 'Владикавказ', 'Дербент', 'Хасавюрт', 'Буйнакск', 'Избербаш', 'Каспийск'];
                            $("#city").autocomplete({
                                source: cities
                            });
                            });
                            </script>
                        </div>
                        <div class="input-box">
                            <script type="text/javascript">
                             function previewFile() {
                                const preview = document.querySelector('img'); 
                                const file = document.querySelector('input[type=file]').files[0];
                                if (file.type.match('image.*')) {
                                    const reader = new FileReader();
                                    reader.addEventListener("load", function() {
                                    preview.src = reader.result; // show image in <img> tag
                                    uploadFile(file)
                                    }, false);
                                    if (file) {
                                    reader.readAsDataURL(file);
                                    }
                                } else {
                                    alert('Только картинки!');
                                    document.querySelector('input[type=file]').value = '';
                                }
                                }
                            
                                function uploadFile(file) {
                                    var formData = new FormData();
                                    formData.append('file', file);
                                    fetch('/upload', {
                                            method: 'POST',
                                            body: formData,
                                        })
                                        .then(response => {
                                            console.log(response);
                                        })
                                        .catch(error => {
                                            console.error(error);
                                        });
                                }
                            </script>
                            <input type="file" onchange="previewFile()" name = "file"><br>
                            <img src="" height="200" alt="Image preview...">
                            <input type="reset" onclick="document.getElementById('form').reset();document.querySelector('img').src = '';" value="Reset">
                         <!-- Notes

                        The code does not include error handling for cases where the file cannot be read or uploaded.
                        Additionally, the following points should also be considered:
                        
                        Error handling when submitting the form, for example, if the file is too large or has an incorrect format.
                        Error handling when reading the file, for example, if the file is corrupted or cannot be read.
                        Ensuring security when sending the file, for example, checking the file type and its contents to prevent sending malicious files. -->
                        </div>
                    </div>
                    <div class="button-container">
                        <div class="button">
                            <input type="submit" value="Register">
                        </div>
                    </div>
                </form>
                
        </div>
    </div>
</body>
</html>